<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet' />
        <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css" />
        <link rel="stylesheet" href="style.css" />
        <script src="https://code.jquery.com/jquery-3.5.1.js" />
        <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js" />


        <title>Bug Tracker</title>
    </h:head>
    <h:body>
        <nav>
            <div class="sidebar-top">
                <span class="shrink-btn">
                    <i class='bx bx-chevron-left'></i>
                </span>
                <img src="img/logo.png" class="logo" alt="logo" />
                <h3 class="hide">Bug Tracker</h3>
            </div>

            <div class="search">
                <i class='bx bx-search'></i>
                <input type="text" class="hide" placeholder="Search..." />
            </div>

            <div class="sidebar-links">
                <ul>
                    <li class="tooltip-element" data-tooltip="0">
                        <a href="main.xhtml" data-active="0">
                            <div class="icon">
                                <i class='bx bx-tachometer'></i>
                                <i class='bx bxs-tachometer'></i>
                            </div>
                            <span class="link hide">Dashboard</span>
                        </a>
                    </li>
                    <li class="tooltip-element" data-tooltip="1">
                        <a href="myProjects.xhtml" data-active="1">
                            <div class="icon">
                                <i class='bx bx-folder'></i>
                                <i class='bx bxs-folder'></i>
                            </div>
                            <span class="link hide">My Projects</span>
                        </a>
                    </li>
                    <li class="tooltip-element" data-tooltip="2">
                        <a href="myTickets.xhtml" class="active" data-active="2">
                            <div class="icon">
                                <i class='bx bx-spreadsheet'></i>
                                <i class='bx bxs-spreadsheet'></i>
                            </div>
                            <span class="link hide">My tickets</span>
                        </a>
                    </li>
                    <li class="tooltip-element" data-tooltip="3">
                        <a href="messages.xhtml" data-active="3">
                            <div class="icon">
                                <i class='bx bx-message-square-detail'></i>
                                <i class='bx bxs-message-square-detail'></i>
                            </div>
                            <span class="link hide">Messages</span>
                        </a>
                    </li>
                    <div class="tooltip">
                        <span class="show">Dashboard</span>
                        <span>My Projects</span>
                        <span>My Tickets</span>
                        <span>Messages</span>
                    </div>
                </ul>

                <h4 class="hide">#{login.getRole()} features</h4>

                <ul>
                    <h:panelGroup rendered='#{login.checkRole("Admin")}'>
                        <li class="tooltip-element" data-tooltip="0">
                            <a href="admin/manageUsers.xhmtl" data-active="4">
                                <div class="icon">
                                    <i class='bx bx-user-plus'></i>
                                    <i class='bx bxs-user-plus'></i>
                                </div>
                                <span class="link hide">Manage Users</span>
                            </a>
                        </li>
                    </h:panelGroup>
                    <h:panelGroup rendered='#{login.checkRole("Admin")}'>
                        <li class="tooltip-element" data-tooltip="1">
                            <a href="admin/allProjects.xhtml" data-active="5">
                                <div class="icon">
                                    <i class='bx bx-group' ></i>
                                    <i class='bx bxs-group' ></i>
                                </div>
                                <span class="link hide">All Projects</span>
                            </a>
                        </li>
                    </h:panelGroup>
                    <h:panelGroup rendered='#{login.checkRole("Project Manager")}'>
                        <li class="tooltip-element" data-tooltip="0">
                            <a href="manager/allProjects.xhtml" data-active="4">
                                <div class="icon">
                                    <i class='bx bx-user-plus'></i>
                                    <i class='bx bxs-user-plus'></i>
                                </div>
                                <span class="link hide">All Projects</span>
                            </a>
                        </li>
                    </h:panelGroup>
                    <h:panelGroup rendered='#{login.checkRole("Project Manager")}'>
                        <li class="tooltip-element" data-tooltip="1">
                            <a href="manager/createProject.xhtml" data-active="5">
                                <div class="icon">
                                    <i class='bx bx-group' ></i>
                                    <i class='bx bxs-group' ></i>
                                </div>
                                <span class="link hide">Create Project</span>
                            </a>
                        </li>
                    </h:panelGroup>
                    <h:panelGroup rendered='#{login.checkRole("Developer")}'>
                        <li class="tooltip-element" data-tooltip="0">
                            <a href="dev/devPlan.xhtml" data-active="4">
                                <div class="icon">
                                    <i class='bx bx-user-plus'></i>
                                    <i class='bx bxs-user-plus'></i>
                                </div>
                                <span class="link hide">Development plan</span>
                            </a>
                        </li>
                    </h:panelGroup>
                    <h:panelGroup rendered='#{login.checkRole("Developer")}'>
                        <li class="tooltip-element" data-tooltip="1">
                            <a href="dev/devChat.xhmtl" data-active="5">
                                <div class="icon">
                                    <i class='bx bx-group' ></i>
                                    <i class='bx bxs-group' ></i>
                                </div>
                                <span class="link hide">Developer Chat</span>
                            </a>
                        </li>
                    </h:panelGroup>
                    <h:panelGroup rendered='#{login.checkRole("Submitter")}'>
                        <li class="tooltip-element" data-tooltip="0">
                            <a href="submitter/submitBug.xhtml" data-active="4">
                                <div class="icon">
                                    <i class='bx bx-user-plus'></i>
                                    <i class='bx bxs-user-plus'></i>
                                </div>
                                <span class="link hide">Submit Bug/Error</span>
                            </a>
                        </li>
                    </h:panelGroup>
                    <h:panelGroup rendered='#{login.checkRole("Submitter")}'>
                        <li class="tooltip-element" data-tooltip="1">
                            <a href="submitter/requestFeature.xhmtl" data-active="5">
                                <div class="icon">
                                    <i class='bx bx-group' ></i>
                                    <i class='bx bxs-group' ></i>
                                </div>
                                <span class="link hide">Request feature</span>
                            </a>
                        </li>
                    </h:panelGroup>
                    <div class="tooltip">
                        <span>#{login.roleFirstPage()}</span>
                        <span>#{login.roleSecondPage()}</span>
                    </div>
                </ul>

                <h4 class="hide">Options</h4>

                <ul>
                    <li class="tooltip-element" data-tooltip="0">
                        <a href="help.xhtml" data-active="6">
                            <div class="icon">
                                <i class='bx bx-help-circle'></i>
                                <i class='bx bxs-help-circle'></i>
                            </div>
                            <span class="link hide">Help</span>
                        </a>
                    </li>
                    <li class="tooltip-element" data-tooltip="1">
                        <a href="settings.xhtml" data-active="7">
                            <div class="icon">
                                <i class='bx bx-cog'></i>
                                <i class='bx bxs-cog'></i>
                            </div>
                            <span class="link hide">Settings</span>
                        </a>
                    </li>
                    <div class="tooltip">
                        <span>Help</span>
                        <span>Settings</span>
                    </div>
                </ul>
            </div>

            <div class="sidebar-footer">
                <a href="#" class="account tooltip-element" data-tooltip="0">
                    <i class='bx bx-user'></i>
                </a>
                <div class="admin-user tooltip-element" data-tooltip="1">
                    <div class="admin-profile hide">
                        <img src="https://t3.ftcdn.net/jpg/00/64/67/80/360_F_64678017_zUpiZFjj04cnLri7oADnyMH0XBYyQghG.jpg" alt="" />
                        <div class="admin-info">
                            <h3>#{login.getName()}</h3>
                            <h5>#{login.getRole()}</h5>
                        </div>
                    </div>

                    <h:form>
                        <h:commandLink value = "←█" action = "#{user.logOut()}" class="log-out" />
                    </h:form>
                </div>
                <div class="tooltip">
                    <span class="show">#{login.getName()}</span>
                    <span>Logout</span>
                </div>
            </div>
        </nav>


        <main>
            <h1>My Tickets</h1>
            <h2>Work in progress...</h2>
            <hr />

            <div class="containerDiv">
                <article class="container">
                    <div class="containerHeader">
                        <h1>My Tickets</h1>
                    </div>
                    <div class="containerContent">
                        <div id="userTable">
                            <h:dataTable styleClass="table" value="#{userBB.users}" var="u" >
                                <h:column>
                                    <f:facet name="header">Id</f:facet>
                                    <h:outputText value="#{u.id}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Name</f:facet>
                                    <h:outputText value="#{u.name}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Email</f:facet>
                                    <h:outputText value="#{u.email}" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">Role</f:facet>
                                    <h:outputText value="#{u.role}" />
                                </h:column>
                            </h:dataTable>
                        </div>
                        <script>
                            $(document).ready(function () {
                                $('.table').DataTable();
                            });
                        </script>
                    </div>
                </article>
            </div>

            <script src="main.js" />
        </main>
    </h:body>
</html>